<link rel="stylesheet" href="bootstrap.css">
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
  <a class="navbar-brand" href="#">Clusterize</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarColor01">
    <ul class="navbar-nav mr-auto">
    </ul>
    <form class="form-inline my-2 my-lg-0">
      <input class="form-control mr-sm-2" type="text" placeholder="Search">
      <button class="btn btn-secondary my-2 my-sm-0" type="submit">Search</button>
    </form>
  </div>
</nav>
<br>
  <fieldset>
    <fieldset class="form-group">
      <legend>Stopwords</legend>
      <p class="text-primary" id="stopwords"></p>
      <div class="form-check">
        <label class="form-check-label">
          <input type="radio" class="form-check-input" name="optionsRadios" id="optionsRadios1" value="option1" checked="">
          Add Stopword
        </label>
      </div>
      <div class="form-check">
      <label class="form-check-label">
          <input type="radio" class="form-check-input" name="optionsRadios" id="optionsRadios2" value="option2">
          Remove Stopword
        </label>
      </div>
      <div class="form-group">
        <input type="text" style="width:25%;" class="form-control" placeholder="Stopword" id="new_word">
      </div>
    </fieldset>
    <button type="submit" class="btn btn-primary" onclick="add_remove_stopword();">Submit</button>
  </fieldset>
<br>
<form>
  <fieldset>
    <fieldset class="form-group">
      <legend>Documents</legend>
      <div class="form-check">
        <label class="form-check-label">
          <input type="radio" class="form-check-input" name="optionsRadios" id="optionsRadios3" value="option3" checked="">
          Add Document
        </label>
      </div>
      <div class="form-check">
        <label class="form-check-label">
          <input type="radio" class="form-check-input" name="optionsRadios" id="optionsRadios4" value="option4">
          Remove Document
        </label>
      </div>
      <div class="form-group">
        <textarea class="form-control" id="exampleTextarea" rows="3" placeholder="Document"></textarea>
      </div>
    </fieldset>
    <button type="submit" class="btn btn-primary">Submit</button>
  </fieldset>
</form><br>
<h5>Clusters</h5>
<div class="jumbotron" id="j0">
  <p id="cluster0" class="lead"></p>
  <hr class="my-4">
  <p id="example0" class="lead"></p>
</div>
<div class="jumbotron" id="j1">
  <p id="cluster1" class="lead"></p>
  <hr class="my-4">
  <p id="example1" class="lead"></p>
</div>
<div class="jumbotron" id="j2">
  <p id="cluster2" class="lead"></p>
  <hr class="my-4">
  <p id="example2" class="lead"></p>
</div>
<div class="jumbotron" id="j3">
  <p id="cluster3" class="lead"></p>
  <hr class="my-4">
  <p id="example3" class="lead"></p>
</div>
<div class="jumbotron" id="j4">
  <p id="cluster4" class="lead"></p>
  <hr class="my-4">
  <p id="example4" class="lead"></p>
</div>
<div class="jumbotron" id="j5">
  <p id="cluster5" class="lead"></p>
  <hr class="my-4">
  <p id="example5" class="lead"></p>
</div>
<div class="jumbotron" id="j6">
  <p id="cluster6" class="lead"></p>
  <hr class="my-4">
  <p id="example6" class="lead"></p>
</div>
<div class="jumbotron" id="j7">
  <p id="cluster7" class="lead"></p>
  <hr class="my-4">
  <p id="example7" class="lead"></p>
</div>
<div class="jumbotron" id="j8">
  <p id="cluster8" class="lead"></p>
  <hr class="my-4">
  <p id="example8" class="lead"></p>
</div>
<div class="jumbotron" id="j9">
  <p id="cluster9" class="lead"></p>
  <hr class="my-4">
  <p id="example9" class="lead"></p>
</div>
<script>
var get_stopwords = function () {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      var my_json = JSON.parse(this.responseText)
      document.getElementById("stopwords").innerHTML = my_json.stopwords;
    }
  };
  xhttp.open("GET", "/get_stopwords", true);
  xhttp.send();
}

var run_script = function () {
  var xhttp1 = new XMLHttpRequest();
  xhttp1.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      var my_json = JSON.parse(this.responseText);
      /*var ex0 = ""
      var ex1 = "";
      var ex2 = "";
      var ex3 = "";
      var ex4 = "";
      var ex5 = "";
      var ex6 = "";
      var ex7 = "";
      var ex8 = "";
      var ex9 = "";

      var sample0 = (my_json.example0).split('<br>');
      for (var i = 0; i < sample0.length; i++) {
        console.log(sample0[i].indexOf('strong class') !== -1);
        if (sample0[i].indexOf('strong class') !== -1) {
          ex0 += '<br>' + sample0[i] + '<br>';
        }
      }
      var sample1 = (my_json.example1).split('<br>');
      for (var i = 0; i < sample1.length; i++) {
        if (sample1[i].indexOf('strong class') !== -1) {
          ex1 += '<br>' + sample1[i] + '<br>';
        }
      }
      var sample2 = (my_json.example2).split('<br>');
      for (var i = 0; i < sample2.length; i++) {
        if (sample2[i].indexOf('strong class') !== -1) {
          ex2 += '<br>' + sample2[i] + '<br>';
        }
      }
      var sample3 = (my_json.example3).split('<br>');
      for (var i = 0; i < sample3.length; i++) {
        if (sample3[i].indexOf('strong class') !== -1) {
          ex3 += '<br>' + sample3[i] + '<br>';
        }
      }
      var sample4 = (my_json.example4).split('<br>');
      for (var i = 0; i < sample4.length; i++) {
        if (sample4[i].indexOf('strong class') !== -1) {
          ex4 += '<br>' + sample4[i] + '<br>';
        }
      }
      var sample5 = (my_json.example5).split('<br>');
      for (var i = 0; i < sample5.length; i++) {
        if (sample5[i].indexOf('strong class') !== -1) {
          ex5 += '<br>' + sample5[i] + '<br>';
        }
      }
      var sample6 = (my_json.example6).split('<br>');
      for (var i = 0; i < sample6.length; i++) {
        if (sample6[i].indexOf('strong class') !== -1) {
          ex6 += '<br>' + sample6[i] + '<br>';
        }
      }
      var sample7 = (my_json.example7).split('<br>');
      for (var i = 0; i < sample7.length; i++) {
        if (sample7[i].indexOf('strong class') !== -1) {
          ex7 += '<br>' + sample7[i] + '<br>';
        }
      }
      var sample8 = (my_json.example8).split('<br>');
      for (var i = 0; i < sample8.length; i++) {
        if (sample8[i].indexOf('strong class') !== -1) {
          ex8 += '<br>' + sample8[i] + '<br>';
        }
      }
      var sample9 = (my_json.example9).split('<br>');
      for (var i = 0; i < sample9.length; i++) {
        if (sample9[i].indexOf('strong class') !== -1) {
          ex9 += '<br>' + sample9[i] + '<br>';
        }
      }*/

      document.getElementById("cluster0").innerHTML = my_json.cluster0;
      document.getElementById("cluster1").innerHTML = my_json.cluster1;
      document.getElementById("cluster2").innerHTML = my_json.cluster2;
      document.getElementById("cluster3").innerHTML = my_json.cluster3;
      document.getElementById("cluster4").innerHTML = my_json.cluster4;
      document.getElementById("cluster5").innerHTML = my_json.cluster5;
      document.getElementById("cluster6").innerHTML = my_json.cluster6;
      document.getElementById("cluster7").innerHTML = my_json.cluster7;
      document.getElementById("cluster8").innerHTML = my_json.cluster8;
      document.getElementById("cluster9").innerHTML = my_json.cluster9;
      document.getElementById("example0").innerHTML = "";
      document.getElementById("example1").innerHTML = "";
      document.getElementById("example2").innerHTML = "";
      document.getElementById("example3").innerHTML = "";
      document.getElementById("example4").innerHTML = "";
      document.getElementById("example5").innerHTML = "";
      document.getElementById("example6").innerHTML = "";
      document.getElementById("example7").innerHTML = "";
      document.getElementById("example8").innerHTML = "";
      document.getElementById("example9").innerHTML = "";
      document.getElementById("example0").innerHTML = my_json.example0;
      document.getElementById("example1").innerHTML = my_json.example1;
      document.getElementById("example2").innerHTML = my_json.example2;
      document.getElementById("example3").innerHTML = my_json.example3;
      document.getElementById("example4").innerHTML = my_json.example4;
      document.getElementById("example5").innerHTML = my_json.example5;
      document.getElementById("example6").innerHTML = my_json.example6;
      document.getElementById("example7").innerHTML = my_json.example7;
      document.getElementById("example8").innerHTML = my_json.example8;
      document.getElementById("example9").innerHTML = my_json.example9;

      if (document.getElementById("example0").innerHTML.length < 3) {
        document.getElementById("j0").style.display = 'none';
      }
      if (document.getElementById("example1").innerHTML.length < 3) {
        document.getElementById("j1").style.display = 'none';
      }
      if (document.getElementById("example2").innerHTML.length < 3) {
        document.getElementById("j2").style.display = 'none';
      }
      if (document.getElementById("example3").innerHTML.length < 3) {
        document.getElementById("j3").style.display = 'none';
      }
      if (document.getElementById("example4").innerHTML.length < 3) {
        document.getElementById("j4").style.display = 'none';
      }
      if (document.getElementById("example5").innerHTML.length < 3) {
        document.getElementById("j5").style.display = 'none';
      }
      if (document.getElementById("example6").innerHTML.length < 3) {
        document.getElementById("j6").style.display = 'none';
      }
      if (document.getElementById("example7").innerHTML.length < 3) {
        document.getElementById("j7").style.display = 'none';
      }
      if (document.getElementById("example8").innerHTML.length < 3) {
        document.getElementById("j8").style.display = 'none';
      }
      if (document.getElementById("example9").innerHTML.length < 3) {
        document.getElementById("j9").style.display = 'none';
      }
    }
  };
  xhttp1.open("GET", "/run_script", true);
  xhttp1.send();
}

get_stopwords();
run_script();

var add_remove_stopword = function () {
  console.log("Clicked");
  if (document.getElementById("optionsRadios1").checked) {
    var xhttp1 = new XMLHttpRequest();
    xhttp1.open("GET", "/add_stopword?new_word=" + document.getElementById("new_word").value, true);
    xhttp1.send();
  }
  else {
    var xhttp1 = new XMLHttpRequest();
    xhttp1.open("GET", "/remove_stopword?removed_word=" + document.getElementById("new_word").value, true);
    xhttp1.send();
  }
  get_stopwords();
  run_script();
}


</script>
